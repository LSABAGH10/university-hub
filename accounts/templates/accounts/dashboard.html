{% extends 'base.html' %}

{% block title %}لوحة التحكم{% endblock %}

{% block content %}
<style>
    /* أنماط خاصة بصفحة لوحة التحكم فقط */
    .container { 
        width: 90%; 
        max-width: 1200px; 
        margin: 20px auto; 
    }
    .dashboard-layout { 
        display: flex; 
        gap: 20px; 
        align-items: flex-start; 
    }
    .main-content { 
        flex: 3; 
    }
    .sidebar { 
        flex: 1; 
    }
    .widget { 
        background-color: #ffffff; 
        border: 1px solid #ddd; 
        border-radius: 8px; 
        padding: 20px; 
        margin-bottom: 20px; 
    }
    h1, h2, h3 { 
        margin-top: 0; 
    }
    .courses-section .header { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        background: none; 
        padding: 0; 
        border: none; 
        margin-bottom: 15px; 
    }
    .courses-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
        gap: 15px; 
    }
    .course-card { 
        background-color: #f8f9fa; 
        border: 1px solid #e0e0e0; 
        border-radius: 8px; 
        padding: 15px; 
    }
    .sidebar .contribute-button { 
        width: 100%; 
        padding: 15px; 
        background-color: #28a745; 
        color: white; 
        border: none; 
        border-radius: 5px; 
        font-size: 1.1em; 
        cursor: pointer; 
        text-align: center; 
        display: block; 
        text-decoration: none; 
    }
    .button { 
        display: inline-block; 
        padding: 8px 15px; 
        background-color: #007bff; 
        color: white; 
        text-decoration: none; 
        border-radius: 5px; 
        font-size: 0.9em;
    }
</style>

<div class="container">
    <h1>أهلاً بك من جديد، {{ user.username }}!</h1>

    <div class="dashboard-layout">

        <main class="main-content">
            <section class="widget courses-section">
                <div class="header">
                    <h2>مقرراتي الدراسية</h2>
                    <a href="{% url 'course-list' %}" class="button">+ تصفح كل المقررات</a>
                </div>
                <div class="courses-grid">
                    {% for course in courses %}
                        <div class="course-card">
                            <a href="{% url 'course-detail' course.pk %}" style="text-decoration:none; color:inherit;">
                                <h3>{{ course.title }}</h3>
                                <p><strong>الكود:</strong> {{ course.course_code }}</p>
                            </a>
                        </div>
                    {% empty %}
                        <p>أنت لم تلتحق بأي مقرر بعد. <a href="{% url 'course-list' %}">تصفح المقررات</a> والتحق بما يهمك!</p>
                    {% endfor %}
                </div>
            </section>
            <section class="widget">
                <h2>آخر الإشعارات</h2>
                <ul>
                    <li>(سيتم عرض الإشعارات هنا لاحقاً)</li>
                </ul>
            </section>
        </main>

        <aside class="sidebar">
            <section class="widget">
                <h3>حاسبة المعدل</h3>
                <p>المعدل التراكمي: <strong>N/A</strong></p>
                <a href="#" class="button">فتح الحاسبة</a>
            </section>
            <section class="widget">
                <h3>الفعاليات القادمة</h3>
                <p>(سيتم عرض المواعيد هنا لاحقاً)</p>
            </section>
            <a href="#" class="contribute-button">ساهم بمحتوى</a>
        </aside>

    </div>
</div>
{% endblock %}